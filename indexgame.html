<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Dodge Game</title>
        <style>
            body{
                background: #111;
                color: #fff;
                text-align: center;
                font-family: Arial, sans-serif;
            }
            canvas{
                background: #222;
                display: block;
                margin: 20px auto;
                border: 2px solid #fff;
            }
            #controls{
                text-align: center;
                margin-top: 10px;
            }
            #controls button{
                font-size: 24px;
                padding: 10px 20px;
                margin: 0 10px;
                cursor: pointer;

            }
        </style>
    </head>
    <body>
        <h1>Dodge Game</h1>
        <p>
            Score: <span id="score">0</span>
            Level: <span id="level">1</span>
        </p>
        <canvas id="gameCanvas" width="600" height="400"></canvas>
        <div id="controls">
            <button id="leftBtn">Left</button>
            <button id="rightBtn">Right</button>
        </div>
        <script>
            const canvas = document.getElementById("gameCanvas");
            const ctx = canvas.getContext("2d");
            let player = {x: 280, y: 350, width: 40, height: 40, speed: 20}
            let score = 0;
            let level = 1;
            let enemies = [{x: 100, y: 0, width: 40, height: 40, speed: 3}];
            function moveLeft(){
                if(player.x > 0) player.x -= player.speed;
            }
            function moveRight(){
                if(player.x < canvas.width - player.width) player.x += player.speed;
            }
            document.addEventListener("keydown", (e)=>{
                if(e.key === "ArrowLeft" || e.key === "a" || e.key === "A")moveLeft();
                if(e.key === "ArrowRight" || e.key === "d" || e.key === "D")moveRight();
            });
            document.getElementById("leftBtn").addEventListener("touchstart", moveLeft);
            document.getElementById("rightBtn").addEventListener("touchstart", moveRight);
            function drawPlayer(){
                ctx.fillStyle ="lime";
                ctx.fillRect(player.x, player.y, player.width, player.height);
            }
            function drawEnemies(){
                ctx.fillStyle="yellow";
                enemies.forEach(e=> 
                    ctx.fillRect(e.x, e.y, e.width, e.height)
                );
            }
            function checkCollision(a,b){
                return(
                    a.x < b.x + b.width && a.x + a.width > b.x
                    && a.y < b.y + b.height && a.y + a.height > b.y
                );
            }
            function update(){
                enemies.forEach( e=> {
                    e.y += e.speed;
                    if (checkCollision(player, e)){
                        alert("Game Over!");
                        location.reload();
                    }
                    if(e.y > canvas.height){
                        e.y = -40;
                        e.x = Math.random() * (canvas.width - e.width);
                        score++;
                        document.getElementById("score").textContent = score;
                        if (score % 5 === 0){
                            level++;
                            e.speed++;
                            document.getElementById("level").textContent = level;
                        }
                    }
                });
            }
            function draw(){
                ctx.clearRect(0,0,canvas.width,canvas.height);
                drawPlayer();
                drawEnemies();
            }
            function loop(){
                update();
                draw();
                requestAnimationFrame(loop);
            }
            loop();
        </script>
    </body>
</html>           